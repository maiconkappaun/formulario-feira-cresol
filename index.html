<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário Cresol</title>
    <style>
        body {
            background-color: white;
            /* Cor de fundo padrão */
            transition: background-color 1s ease;
            /* Transição suave da cor de fundo */
        }

        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            transition: background-color 1s ease;
            background-image: url('https://cresol.com.br/wp-content/uploads/2022/04/Icone-03-300x300.png');
            background-color: rgba(245, 130, 32, 0.3);
            background-size: 7em;
        }

        label {
            color: #F58220;
        }

        input[type="text"],
        input[type="number"] {
            padding: 10px;
            border: none;
            border-bottom: 2px solid #F58220;
            margin: 10px;
            width: 90%;
            outline: none;
            font-size: 18pt;
        }

        input[type="text"]:focus,
        input[type="number"]:focus {
            background-color: #d254002a;
        }

        #mensagem2,
        #mensagem3 {
            color: red;
            display: none;
        }

        button {
            /* display: none; */
            background-color: #F58220;
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            font-size: 18pt;
        }

        button:hover {
            background-color: #D25400;
        }

        #quiz-container {
            background-color: rgba(255, 255, 255, 0.8);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
            text-align: left;
        }

        h1 {
            color: #F58220;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.068);
        }

        h3 {
            color: #005C46;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.068);
        }

        label {
            font-size: 16pt;
        }

        /* Estilo do select */
        select {
            padding: 10px;
            border: none;
            border-bottom: 2px solid #F58220;
            margin: 10px;
            width: 90%;
            outline: none;
            font-size: 18pt;
        }

        /* Estilo do select quando em foco (selecionado) */
        select:focus {
            background-color: #d254002a;
        }

        /* Estilo das opções do select */
        select option {
            background-color: #fff;
            /* Cor de fundo */
            color: #F58220;
            /* Cor do texto */
            font-size: 18pt;
        }

        F #botao {
            display: none;
        }

        @media (max-width: 770px) {
            #quiz-container {
                width: 80%;
                margin-top: 25em;   
            }
        }

        /* Estilização do checkbox */
        input[type="checkbox"] {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }

        /* Estilo do visual do checkbox */
        input[type="checkbox"]+label::before {
            content: "";
            display: inline-block;
            width: 20px;
            height: 20px;
            margin-right: 10px;
            border: 2px solid #F58220;
            background-color: transparent;
            border-radius: 3px;
        }

        /* Estilo do checkbox marcado */
        input[type="checkbox"]:checked+label::before {
            background-color: #F58220;
        }

        /* Estilo do texto da label */
        label {
            font-size: 16pt;
            color: #F58220;
            display: flex;
            align-items: center;
        }

        /* Estilo do modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.7);
        }

        /* Conteúdo do modal */
        .modal-conteudo {
            background-color: #fff;
            margin: 10% auto;
            padding: 20px;
            border-radius: 5px;
            width: 80%;
            max-width: 600px;
            position: relative;
        }

        /* Estilo do botão de fechar */
        .fecharModal {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
        }

        .fecharModal:hover {
            color: #F58220;
        }

        /* Estilizando o link com a classe "link-modal" */
        .link-modal {
            color: #005C46;
            /* Cor laranja */
            text-decoration: underline;
            /* Adicione sublinhado (opcional) */
        }

        .link-modal:hover {
            color: #003025;
            /* Cor laranja mais escura ao passar o mouse (opcional) */
        }

        /* Estilização dos radio buttons */
        .radio-socio {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }

        /* Estilo do visual dos radio buttons */
        .radio-socio+label::before {
            content: "";
            display: inline-block;
            width: 20px;
            height: 20px;
            margin-right: 10px;
            border: 2px solid #F58220;
            background-color: transparent;
            border-radius: 50%;
        }

        /* Estilo dos radio buttons marcados */
        .radio-socio:checked+label::before {
            background-color: #F58220;
        }

        /* Estilo do texto da label */
        .radio-socio+label {
            font-size: 16pt;
            color: #F58220;
            display: flex;
            align-items: center;
        }

        /* Alinhamento horizontal dos radio buttons com o texto da label */
        .radio-group {
            display: flex;
            align-items: center;
        }

        /* Espaçamento entre os radio buttons e labels */
        .radio-group label {
            margin-right: 20px;
        }

        #botao2 {
            display: none;
        }

        #cpf::placeholder {
            color: #b1987448;
            /* Cor do texto do placeholder */
            font-style: italic;
            /* Estilo do texto do placeholder (itálico) */
        }
    </style>
</head>

<body onload="verificarCampos()">
    <div id="quiz-container">
        <h1 style="text-align: center;" id="titulo">Cadastre-se</h1>
        <h3 style="text-align: center;" id="titulo2"></h3>
        <!-- <div style="display: none;" id="qrcode">
            <img src="Qrlogo-free.png" alt="">
            <button id="reiniciar" onclick="reiniciar()">Novo</button>
        </div> -->
        <div id="divnome">
            <label for="">Nome completo:</label>
            <input type="text" name="nome" id="nome" oninput="verificarCampos()">
        </div>
        <div id="divcpf">
            <label for="">CPF:</label>
            <input type="text" name="cpf" id="cpf" maxlength="14" placeholder="123.456.789-09"
                oninput="verificarCampos()">
        </div>
        <div id="divtelefone">
            <label for="">Telefone:</label>
            <input type="number" name="telefone" id="telefone" oninput="verificarCampos()">
        </div>
        <div id="dividade">
            <label>Selecione sua idade:</label>
            <br>
            <div class="radio-group">
                <input type="radio" name="idade" value="sim" id="18anos" class="radio-socio"
                    onchange="verificarCampos()">
                <label for="18anos">1 - 18</label>
                <input type="radio" name="idade" value="nao" style="margin-left: 8em;" id="40anos" class="radio-socio"
                    onchange="verificarCampos()">
                <label for="40anos">19 - 40</label>
                <input type="radio" name="idade" value="nao" style="margin-left: 18em;" id="acimaAnos"
                    class="radio-socio" onchange="verificarCampos()">
                <label for="acimaAnos">Acima de 40</label>
            </div>
        </div>
        <br>
        <div id="divmunicipios">
            <label for="municipios">Município onde reside:</label>
            <select id="municipios" name="municipios" onchange="verificarCampos()">
                <option value="" disabled selected hidden>Selecione uma opção</option>
                <option value="Abelardo Luz">Abelardo Luz</option>
                <option value="Água Doce">Água Doce</option>
                <option value="Águas de Chapecó">Águas de Chapecó</option>
                <option value="Águas Frias">Águas Frias</option>
                <option value="Alto Bela Vista">Alto Bela Vista</option>
                <option value="Anchieta">Anchieta</option>
                <option value="Arabutã">Arabutã</option>
                <option value="Arroio Trinta">Arroio Trinta</option>
                <option value="Arvoredo">Arvoredo</option>
                <option value="Bandeirante">Bandeirante</option>
                <option value="Barra Bonita">Barra Bonita</option>
                <option value="Belmonte">Belmonte</option>
                <option value="Bom Jesus">Bom Jesus</option>
                <option value="Bom Jesus do Oeste">Bom Jesus do Oeste</option>
                <option value="Caçador">Caçador</option>
                <option value="Caibi">Caibi</option>
                <option value="Calmon">Calmon</option>
                <option value="Campo Erê">Campo Erê</option>
                <option value="Capinzal">Capinzal</option>
                <option value="Catanduvas">Catanduvas</option>
                <option value="Caxambu do Sul">Caxambu do Sul</option>
                <option value="Chapecó">Chapecó</option>
                <option value="Concórdia">Concórdia</option>
                <option value="Cordilheira Alta">Cordilheira Alta</option>
                <option value="Coronel Freitas">Coronel Freitas</option>
                <option value="Coronel Martins">Coronel Martins</option>
                <option value="Cunha Porã">Cunha Porã</option>
                <option value="Cunhataí">Cunhataí</option>
                <option value="Descanso">Descanso</option>
                <option value="Dionísio Cerqueira">Dionísio Cerqueira</option>
                <option value="Entre Rios">Entre Rios</option>
                <option value="Erval Velho">Erval Velho</option>
                <option value="Faxinal dos Guedes">Faxinal dos Guedes</option>
                <option value="Flor do Sertão">Flor do Sertão</option>
                <option value="Formosa do Sul">Formosa do Sul</option>
                <option value="Fraiburgo">Fraiburgo</option>
                <option value="Galvão">Galvão</option>
                <option value="Guaraciaba">Guaraciaba</option>
                <option value="Guarujá do Sul">Guarujá do Sul</option>
                <option value="Guatambu">Guatambu</option>
                <option value="Herval d'Oeste">Herval d'Oeste</option>
                <option value="Ibiam">Ibiam</option>
                <option value="Ibicaré">Ibicaré</option>
                <option value="Iomerê">Iomerê</option>
                <option value="Ipira">Ipira</option>
                <option value="Iporã do Oeste">Iporã do Oeste</option>
                <option value="Ipuaçu">Ipuaçu</option>
                <option value="Ipumirim">Ipumirim</option>
                <option value="Iraceminha">Iraceminha</option>
                <option value="Irani">Irani</option>
                <option value="Irati">Irati</option>
                <option value="Itá">Itá</option>
                <option value="Itapiranga">Itapiranga</option>
                <option value="Jaborá">Jaborá</option>
                <option value="Jardinópolis">Jardinópolis</option>
                <option value="Joaçaba">Joaçaba</option>
                <option value="Jupiá">Jupiá</option>
                <option value="Lacerdópolis">Lacerdópolis</option>
                <option value="Lajeado Grande">Lajeado Grande</option>
                <option value="Lebon Régis">Lebon Régis</option>
                <option value="Lindóia do Sul">Lindóia do Sul</option>
                <option value="Luzerna">Luzerna</option>
                <option value="Macieira">Macieira</option>
                <option value="Maravilha">Maravilha</option>
                <option value="Marema">Marema</option>
                <option value="Matos Costa">Matos Costa</option>
                <option value="Modelo">Modelo</option>
                <option value="Mondaí">Mondaí</option>
                <option value="Nova Erechim">Nova Erechim</option>
                <option value="Nova Itaberaba">Nova Itaberaba</option>
                <option value="Novo Horizonte">Novo Horizonte</option>
                <option value="Ouro">Ouro</option>
                <option value="Ouro Verde">Ouro Verde</option>
                <option value="Paial">Paial</option>
                <option value="Palma Sola">Palma Sola</option>
                <option value="Palmitos">Palmitos</option>
                <option value="Paraíso">Paraíso</option>
                <option value="Passos Maia">Passos Maia</option>
                <option value="Peritiba">Peritiba</option>
                <option value="Pinhalzinho">Pinhalzinho</option>
                <option value="Pinheiro Preto">Pinheiro Preto</option>
                <option value="Piratuba">Piratuba</option>
                <option value="Planalto Alegre">Planalto Alegre</option>
                <option value="Ponte Serrada">Ponte Serrada</option>
                <option value="Presidente Castello Branco">Presidente Castello Branco</option>
                <option value="Princesa">Princesa</option>
                <option value="Quilombo">Quilombo</option>
                <option value="Rio das Antas">Rio das Antas</option>
                <option value="Riqueza">Riqueza</option>
                <option value="Romelândia">Romelândia</option>
                <option value="Saltinho">Saltinho</option>
                <option value="Salto Veloso">Salto Veloso</option>
                <option value="Santa Helena">Santa Helena</option>
                <option value="Santa Terezinha do Progresso">Santa Terezinha do Progresso</option>
                <option value="Santiago do Sul">Santiago do Sul</option>
                <option value="São Bernardino">São Bernardino</option>
                <option value="São Carlos">São Carlos</option>
                <option value="São Domingos">São Domingos</option>
                <option value="São João do Oeste">São João do Oeste</option>
                <option value="São José do Cedro">São José do Cedro</option>
                <option value="São Lourenço do Oeste">São Lourenço do Oeste</option>
                <option value="São Miguel da Boa Vista">São Miguel da Boa Vista</option>
                <option value="São Miguel do Oeste">São Miguel do Oeste</option>
                <option value="Saudades">Saudades</option>
                <option value="Seara">Seara</option>
                <option value="Serra Alta">Serra Alta</option>
                <option value="Sul Brasil">Sul Brasil</option>
                <option value="Tangará">Tangará</option>
                <option value="Tigrinhos">Tigrinhos</option>
                <option value="Treze Tílias">Treze Tílias</option>
                <option value="Tunápolis">Tunápolis</option>
                <option value="União do Oeste">União do Oeste</option>
                <option value="Vargeão">Vargeão</option>
                <option value="Vargem Bonita">Vargem Bonita</option>
                <option value="Videira">Videira</option>
                <option value="Xanxerê">Xanxerê</option>
                <option value="Xavantina">Xavantina</option>
                <option value="Outros">Outros</option>
            </select>
        </div>
        <br>
        <div id="divsocio">
            <label>É associado(a):</label>
            <br>
            <div class="radio-group">
                <input type="radio" name="socio" value="sim" id="socioSim" class="radio-socio"
                    onchange="verificarCampos()">
                <label for="socioSim">Sim</label>
                <input type="radio" name="socio" value="nao" style="margin-left: 7em;" id="socioNao" class="radio-socio"
                    onchange="verificarCampos()">
                <label for="socioNao">Não</label>
            </div>
        </div>
        <div id="divlgpd">
            <br>
            <input type="checkbox" id="lgpd" onchange="verificarCampos()">
            <label for="lgpd">Aceito os termos da LGPD</label>
        </div>
        <div id="modaldiv" style="text-align: right;">
            <br>
            <a href="#" id="abrirModal" class="link-modal">Saiba mais sobre a LGPD</a>
        </div>
        <ul style="visibility: hidden;">
            <li style="visibility: hidden;"><a style="visibility: hidden;"
                    href="instagram://user?username=cresolalianca" id="meuLink"></a></li>
        </ul>
        <div id="mensagem2" style="display: none;text-align: center;">Preencher todos os campos</div>
        <div id="mensagem3" style="display: none;text-align: center;">CPF inválido</div>
        <div id="botao" style="text-align: center;">
            <button style="text-align: center;" onclick="pegarDados()">Confirmar</button>
        </div>
        <div id="botao2" style="text-align: center;">
            <button style="text-align: center; " onclick="clicarNoLink()">Abrir Instagram</button>
        </div>
        <!-- Modal -->
        <div id="modal" class="modal">
            <div class="modal-conteudo">
                <span class="fecharModal" id="fecharModal">&times;</span>
                <h2>LGPD - Lei Geral de Proteção de Dados</h2>
                <p>A Lei Geral de Proteção de Dados Pessoais (LGPD), Lei n° 13.709/2018, foi promulgada para proteger os
                    direitos fundamentais de liberdade e de privacidade e a livre formação da personalidade de cada
                    indivíduo. A Lei fala sobre o tratamento de dados pessoais, dispostos em meio físico ou digital,
                    feito por pessoa física ou jurídica de direito público ou privado, englobando um amplo conjunto de
                    operações que podem ocorrer em meios manuais ou digitais.</p>
                <p>Os dados registrados neste formulário, serão armazenados em nuvem, e serão gerenciados pela Cresol.
                </p>
                <p>Estes, serão utilizados exclusivamente para realização do sorteio e futuros contatos para oferta de
                    nossos serviços financeiros.</p>
                <!-- Adicione o texto referente à LGPD aqui -->
            </div>
        </div>
    </div>
    <script src="script.js"></script>
    <script src="teste.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        // Função para aplicar a máscara ao CPF
        function formatarCPF(cpf) {
            cpf = cpf.replace(/\D/g, ''); // Remove todos os caracteres não numéricos
            cpf = cpf.replace(/(\d{3})(\d)/, '$1.$2'); // Insere o primeiro ponto
            cpf = cpf.replace(/(\d{3})(\d)/, '$1.$2'); // Insere o segundo ponto
            cpf = cpf.replace(/(\d{3})(\d{2})$/, '$1-$2'); // Insere o traço
            return cpf;
        }

        // Função para atualizar o campo com a máscara
        function mascaraCPF() {
            var inputCPF = document.getElementById('cpf');
            var valorCPF = inputCPF.value;

            // Aplica a máscara
            valorCPF = formatarCPF(valorCPF);

            // Atualiza o valor no campo
            inputCPF.value = valorCPF;
        }

        // Adiciona um evento de input para chamar a função de máscara quando o usuário digitar
        var inputCPF = document.getElementById('cpf');
        inputCPF.addEventListener('input', mascaraCPF);
        async function pegarDados() {
            var nome = document.getElementById('nome').value.toUpperCase()
            var cpf = document.getElementById('cpf').value;
            var telefone = document.getElementById('telefone').value;
            var municipio = document.getElementById('municipios').value;
            var lgpdCheckbox = document.getElementById('lgpd');
            let now = new Date
            // Obtenha uma referência aos radio buttons
            var radioSim = document.getElementById('socioSim');
            var radioNao = document.getElementById('socioNao');

            var idade1 = document.getElementById('18anos');
            var idade2 = document.getElementById('40anos');
            var idade3 = document.getElementById('acimaAnos');

            // Verifique qual radio button está selecionado
            var escolha = "";
            if (radioSim.checked) {
                escolha = "Sim";
            } else if (radioNao.checked) {
                escolha = "Não";
            }
            var escolhaIdade = "";
            if (idade1.checked) {
                escolhaIdade = "1 - 18";
            } else if (idade2.checked) {
                escolhaIdade = "19 - 40";
            } else if (idade3.checked) {
                escolhaIdade = "Acima de 40";
            }
            const titulo = document.getElementById("titulo");
            const titulo2 = document.getElementById("titulo2");
            const divnome = document.getElementById("divnome");
            const divcpf = document.getElementById("divcpf");
            const divtelefone = document.getElementById("divtelefone");
            const divmunicipios = document.getElementById("divmunicipios");
            const divlgpd = document.getElementById("divlgpd");
            const botao = document.getElementById("botao");
            const botao2 = document.getElementById("botao2");
            const mensagem2 = document.getElementById("mensagem2");
            const mensagem3 = document.getElementById("mensagem3");
            const modaldiv = document.getElementById("modaldiv");
            const divsocio = document.getElementById("divsocio");
            const dividade = document.getElementById("dividade");
            titulo.textContent = "Quase lá...";
            titulo2.textContent = "Para finalizar, siga o perfil da Cresol Aliança no Instagram!";
            divnome.style.display = "none";
            divcpf.style.display = "none";
            divtelefone.style.display = "none";
            divmunicipios.style.display = "none";
            divlgpd.style.display = "none";
            botao.style.display = "none";
            botao2.style.display = "block";
            mensagem2.style.display = "none";
            mensagem3.style.display = "none";
            modaldiv.style.display = "none";
            divsocio.style.display = "none";
            dividade.style.display = "none";
            await salvar(now, nome, cpf, telefone, escolha, escolhaIdade, municipio)
            await clicarNoLink()
        }
        function clicarNoLink() {
            var link = document.getElementById("meuLink");
            if (link) {
                link.click();
            }
        }
        async function verificarCampos() {
            var nome = document.getElementById('nome').value;
            var cpf = document.getElementById('cpf').value;
            var telefone = document.getElementById('telefone').value;
            var lgpdCheckbox = document.getElementById('lgpd');
            var socioSim = document.getElementById('socioSim');
            var socioNao = document.getElementById('socioNao');
            var idade1 = document.getElementById('18anos');
            var idade2 = document.getElementById('40anos');
            var idade3 = document.getElementById('acimaAnos');
            var municipio = document.getElementById('municipios').value;

            if (nome !== "" && cpf !== "" && telefone !== "" && lgpdCheckbox.checked && (socioSim.checked || socioNao.checked) && (idade1.checked || idade2.checked || idade3.checked) && municipio !== "") {
                if (await validaCPF(cpf)) {
                    document.getElementById('mensagem2').style.display = 'none';
                    document.getElementById('mensagem3').style.display = 'none';
                    document.getElementById("botao").style.display = 'block';
                    document.getElementById("botao").style.textAlign = 'center';
                } else {
                    document.getElementById('mensagem3').style.display = 'block';
                    document.getElementById('mensagem2').style.display = 'none';
                    document.getElementById("botao").style.display = 'none';
                }

            } else {
                document.getElementById('mensagem2').style.display = 'block';
                document.getElementById('mensagem3').style.display = 'none';
                document.getElementById("botao").style.display = 'none';
            }
        }
        // Função para abrir o modal
        function abrirModal() {
            var modal = document.getElementById("modal");
            modal.style.display = "block";
        }

        // Função para fechar o modal
        function fecharModal() {
            var modal = document.getElementById("modal");
            modal.style.display = "none";
        }

        // Evento de clique no link para abrir o modal
        document.getElementById("abrirModal").addEventListener("click", abrirModal);

        // Evento de clique no botão de fechar o modal
        document.getElementById("fecharModal").addEventListener("click", fecharModal);

        // Fechar o modal se o usuário clicar fora dele
        window.addEventListener("click", function (event) {
            var modal = document.getElementById("modal");
            if (event.target == modal) {
                modal.style.display = "none";
            }
        });
    </script>
</body>

</html>